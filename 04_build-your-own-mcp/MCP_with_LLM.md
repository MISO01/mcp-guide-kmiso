LLM을 활용하여 바이브코딩으로 나만의 MCP 만들기
---

# 🤖 LLM(Claude 등)을 활용한 MCP 서버 개발 가이드

Claude와 같은 대형 언어 모델(LLM)을 활용하면 **복잡한 MCP 서버도 빠르게 설계·구현**할 수 있습니다. 이 문서는 LLM 기반 MCP 서버 제작을 위한 실전 절차와 팁을 정리한 가이드입니다.

---

## 📦 사전 준비

Claude가 정확한 MCP 서버를 생성하도록 하려면 먼저 필요한 문서들을 준비해야 합니다:

1. **MCP 전체 스펙 문서 복사**
   - https://modelcontextprotocol.io/llms-full.txt  
     → 이 문서에는 MCP의 전체 구조, 형식, 메시지 규격 등이 담겨 있습니다.
   - Claude 대화창에 붙여넣어 **맥락 제공**하기

2. **MCP SDK 문서 복사**
   - MCP SDK는 TypeScript 또는 Python용으로 제공됩니다.
   - 예: `https://github.com/modelcontext/mcp-ts`, `https://github.com/modelcontext/mcp-python`
   - 각 리포지토리의 README 및 예시 서버 코드 등도 함께 Claude에게 제공

3. **기타 참고 자료**
   - 참고할 다른 MCP 서버 예시, 사용하는 외부 API 문서 등

---

## 🧭 Claude에게 요구사항 설명하기

문서를 충분히 제공한 뒤, Claude에게 다음과 같이 명확하게 설명하세요:

> ✅ "이런 MCP 서버를 만들어줘":

- 우리 회사 PostgreSQL DB와 연결됨
- DB 테이블 목록을 리소스로 제공함
- SQL read-only 쿼리를 실행하는 툴이 있음
- 자주 쓰는 분석 쿼리는 prompt로 제공됨
- DB 연결 정보는 `env` 파일에서 불러오도록 설정함

이처럼 **서버가 노출할 리소스/툴/프롬프트**, **외부 시스템 연동 방식** 등을 명확히 전달해야 Claude가 적절한 구조를 설계해줍니다.

---

## 🔧 Claude와의 협업 방식

Claude와 효과적으로 MCP 서버를 개발하려면 다음 방식을 따르세요:

### 1. **핵심 기능부터 단계적으로 구현**
   - 먼저 리소스 정의 → 툴 구현 → 프롬프트 템플릿 → 에러 처리 순으로 요청

### 2. **코드 이해 요청**
   - Claude가 제공한 코드 중 이해 안 되는 부분은 설명을 요청
   - "이 부분이 어떻게 작동하는지 설명해줘" 식으로 질문

### 3. **수정·개선 지시**
   - “이걸 JSON 대신 YAML로 바꿔줘”, “POST 요청을 GET으로 바꿔줘” 등 세부 개선 요청

### 4. **테스트 및 엣지 케이스 요청**
   - 예상 입력값/에러 상황/권한 문제 등 다양한 조건을 테스트하도록 Claude에 요청

---

## 🛠 Claude가 지원하는 MCP 기능 영역

Claude는 MCP 서버 구성에 필요한 거의 모든 요소를 도와줄 수 있습니다:

- ✅ 리소스 정의 및 노출
- ✅ 툴 구조 및 파라미터 설계
- ✅ 프롬프트 템플릿 및 컨텍스트 삽입
- ✅ 예외 처리, 로그 출력, 에러 메시지 커스터마이징
- ✅ HTTP 서버 구성, 포트 설정, 클라이언트 핸드셰이크 대응 등

---

## 📌 베스트 프랙티스

MCP 서버를 Claude와 협업해 만들 때 다음을 꼭 유의하세요:

| 항목 | 설명 |
|------|------|
| ✅ 기능 분리 | 서버 기능을 작은 단위로 쪼개 단계별 구현 |
| ✅ 테스트 우선 | 각 기능은 테스트 스크립트로 검증하고 진행 |
| ✅ 보안 고려 | 입력값 검증, DB 인증 토큰 등 철저하게 처리 |
| ✅ 문서화 | Claude에게 주석·설명까지 함께 작성 요청 |
| ✅ 표준 준수 | `llms-full.txt`의 MCP 스펙과 완전히 호환되도록 설계 |

---

## 🔁 서버 완성 후의 단계

1. **코드 리뷰**
   - Claude가 작성한 코드를 꼼꼼히 읽고 테스트

2. **MCP Inspector 툴로 테스트**
   - MCP 서버가 올바르게 툴/리소스를 노출하는지 확인

3. **Claude Desktop 등 클라이언트에 연결**
   - `mcp.json` 또는 설정 파일에 서버 정보 등록 후 연결 테스트

4. **사용자 피드백 기반 반복 개선**
   - 실제 사용하면서 기능 보완, 추가 프롬프트 설계 등 수행

5. **공개 또는 팀 배포**
   - 깃허브에 배포하거나 팀 내 공용 서버로 운영

---

#실제 예시

좋아요, 미소님! 그럼 위에서 안내드린 Claude 프롬프트들을 **한국어로 자연스럽게 정리**해드릴게요. Claude에게 한 단계씩 보내면서 **한국 날씨 정보를 제공하는 MCP 서버**를 만들 수 있도록 구성했습니다.

---

### ✅ **1단계: MCP 문서 제공하기**

```
안녕하세요 Claude. MCP 서버를 만들고 싶어서 도와주세요.

먼저 MCP 전체 문서를 전달할게요. 아래 내용을 이해하고 기억해주세요.

[MCP 전체 문서 복붙: https://modelcontextprotocol.io/llms-full.txt]

그리고 여기는 Python SDK의 문서입니다:
[README와 관련 문서 복붙: https://github.com/modelcontextprotocol/python-sdk]
https://apihub.kma.go.kr/에서 인증키를 발급받았어요. 제 인증키는 your-api-key입니다.
```

---

### ✅ **2단계: 내가 만들 MCP 서버 설명하기**

```
제가 만들고 싶은 MCP 서버는 한국의 날씨 정보를 제공하는 서버입니다.

서버의 주요 기능은 다음과 같습니다:
- 한국기상청(KMA)에 공개된 날씨 API에 연결
- 날씨 정보를 MCP의 리소스로 제공 (예: 기온, 습도, 날씨 상태 등)
- 사용자가 도시나 지역명을 입력하면 날씨를 조회할 수 있는 tool 제공
- 사용자가 자연어로 날씨 요약을 받을 수 있는 prompt 템플릿도 추가하고 싶습니다
```

---

### ✅ **3단계: 리소스 정의 요청**

```
weather라는 이름의 리소스를 정의해주세요. 리소스 스키마는 다음과 같습니다:

- city: string
- temperature: float
- humidity: float
- condition: string (예: 맑음, 비, 흐림 등)
- timestamp: datetime

사용자가 조회할 때마다 외부 날씨 API를 호출해서 최신 데이터를 불러오는 방식으로 해주세요.
```

---

### ✅ **4단계: Tool 정의 요청**

```
get_weather_by_city라는 이름의 tool을 정의해주세요.

기능:
- 입력값: city (string)
- 입력된 도시명을 바탕으로 외부 날씨 API를 호출
- 현재 기온, 습도, 날씨 상태를 반환

```

---

### ✅ **5단계: 프롬프트 템플릿 정의 요청 (선택)**

```
today_weather_summary라는 이름의 prompt 템플릿을 정의해주세요.

입력값: city (string)  
출력 예시: "오늘 서울의 날씨는 맑고, 기온은 22도이며, 습도는 45%입니다."

이 프롬프트를 사용해서 사용자가 날씨 요약을 자연어로 받을 수 있게 해주세요.
```

---

### ✅ **6단계: 전체 서버 코드 생성 요청**

```
지금까지 정의한 리소스, tool, 프롬프트를 모두 포함해서 MCP 서버 전체 코드를 Python SDK 기반으로 생성해주세요.

포함되어야 할 것:
- weather 리소스
- get_weather_by_city tool
- today_weather_summary prompt
- API 응답은 일단 mock 처리해도 됩니다
```

---

### ✅ **7단계: 입력 검증 및 예외 처리 추가 요청**

```
도시명 입력값에 대한 검증 로직을 추가해주세요.

그리고 외부 API 호출 실패나 입력 오류가 있을 때를 대비한 예외 처리와 로그 기록 기능도 넣어주세요.

또한 서버 작동을 확인할 수 있는 간단한 테스트 스크립트도 작성해주세요.
```

---

### ✅ **8단계: MCP Inspector로 테스트할 수 있게 만들기**

```
이 서버가 MCP Inspector에서 정상적으로 동작할 수 있도록 구성됐는지 확인해주세요.

툴, 리소스, 프롬프트가 MCP Inspector에 어떻게 나타나는지 알려주시고, 테스트 방법도 설명해주세요.
```

---


